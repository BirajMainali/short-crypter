(function(j,w){typeof exports=="object"&&typeof module<"u"?w(exports):typeof define=="function"&&define.amd?define(["exports"],w):(j=typeof globalThis<"u"?globalThis:j||self,w(j.VUseCrypter={}))})(this,function(j){"use strict";var w=Uint8Array,b=Uint16Array,nr=Uint32Array,fr=new w([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),vr=new w([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lr=new w([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Er=function(r,n){for(var e=new b(31),a=0;a<31;++a)e[a]=n+=1<<r[a-1];for(var f=new nr(e[30]),a=1;a<30;++a)for(var i=e[a];i<e[a+1];++i)f[i]=i-e[a]<<5|a;return[e,f]},Tr=Er(fr,2),Sr=Tr[0],tr=Tr[1];Sr[28]=258,tr[258]=28;for(var kr=Er(vr,0),Nr=kr[0],Ar=kr[1],ur=new b(32768),c=0;c<32768;++c){var Z=(c&43690)>>>1|(c&21845)<<1;Z=(Z&52428)>>>2|(Z&13107)<<2,Z=(Z&61680)>>>4|(Z&3855)<<4,ur[c]=((Z&65280)>>>8|(Z&255)<<8)>>>1}for(var H=function(r,n,e){for(var a=r.length,f=0,i=new b(n);f<a;++f)r[f]&&++i[r[f]-1];var u=new b(n);for(f=0;f<n;++f)u[f]=u[f-1]+i[f-1]<<1;var h;if(e){h=new b(1<<n);var l=15-n;for(f=0;f<a;++f)if(r[f])for(var o=f<<4|r[f],v=n-r[f],s=u[r[f]-1]++<<v,C=s|(1<<v)-1;s<=C;++s)h[ur[s]>>>l]=o}else for(h=new b(a),f=0;f<a;++f)r[f]&&(h[f]=ur[u[r[f]-1]++]>>>15-r[f]);return h},$=new w(288),c=0;c<144;++c)$[c]=8;for(var c=144;c<256;++c)$[c]=9;for(var c=256;c<280;++c)$[c]=7;for(var c=280;c<288;++c)$[c]=8;for(var d=new w(32),c=0;c<32;++c)d[c]=5;var Or=H($,9,0),Rr=H($,9,1),Yr=H(d,5,0),_r=H(d,5,1),hr=function(r){for(var n=r[0],e=1;e<r.length;++e)r[e]>n&&(n=r[e]);return n},_=function(r,n,e){var a=n/8|0;return(r[a]|r[a+1]<<8)>>(n&7)&e},cr=function(r,n){var e=n/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(n&7)},wr=function(r){return(r+7)/8|0},ir=function(r,n,e){(n==null||n<0)&&(n=0),(e==null||e>r.length)&&(e=r.length);var a=new(r.BYTES_PER_ELEMENT==2?b:r.BYTES_PER_ELEMENT==4?nr:w)(e-n);return a.set(r.subarray(n,e)),a},qr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],q=function(r,n,e){var a=new Error(n||qr[r]);if(a.code=r,Error.captureStackTrace&&Error.captureStackTrace(a,q),!e)throw a;return a},Vr=function(r,n,e){var a=r.length;if(!a||e&&e.f&&!e.l)return n||new w(0);var f=!n||e,i=!e||e.i;e||(e={}),n||(n=new w(a*3));var u=function(or){var ar=n.length;if(or>ar){var p=new w(Math.max(ar*2,or));p.set(n),n=p}},h=e.f||0,l=e.p||0,o=e.b||0,v=e.l,s=e.d,C=e.m,g=e.n,z=a*8;do{if(!v){h=_(r,l,1);var T=_(r,l+1,3);if(l+=3,T)if(T==1)v=Rr,s=_r,C=9,g=5;else if(T==2){var I=_(r,l,31)+257,W=_(r,l+10,15)+4,m=I+_(r,l+5,31)+1;l+=14;for(var S=new w(m),x=new w(19),t=0;t<W;++t)x[lr[t]]=_(r,l+t*3,7);l+=W*3;for(var J=hr(x),B=(1<<J)-1,L=H(x,J,1),t=0;t<m;){var k=L[_(r,l,B)];l+=k&15;var M=k>>>4;if(M<16)S[t++]=M;else{var N=0,A=0;for(M==16?(A=3+_(r,l,3),l+=2,N=S[t-1]):M==17?(A=3+_(r,l,7),l+=3):M==18&&(A=11+_(r,l,127),l+=7);A--;)S[t++]=N}}var D=S.subarray(0,I),y=S.subarray(I);C=hr(D),g=hr(y),v=H(D,C,1),s=H(y,g,1)}else q(1);else{var M=wr(l)+4,V=r[M-4]|r[M-3]<<8,U=M+V;if(U>a){i&&q(0);break}f&&u(o+V),n.set(r.subarray(M,U),o),e.b=o+=V,e.p=l=U*8,e.f=h;continue}if(l>z){i&&q(0);break}}f&&u(o+131072);for(var E=(1<<C)-1,O=(1<<g)-1,Y=l;;Y=l){var N=v[cr(r,l)&E],K=N>>>4;if(l+=N&15,l>z){i&&q(0);break}if(N||q(2),K<256)n[o++]=K;else if(K==256){Y=l,v=null;break}else{var R=K-254;if(K>264){var t=K-257,G=fr[t];R=_(r,l,(1<<G)-1)+Sr[t],l+=G}var Q=s[cr(r,l)&O],P=Q>>>4;Q||q(3),l+=Q&15;var y=Nr[P];if(P>3){var G=vr[P];y+=cr(r,l)&(1<<G)-1,l+=G}if(l>z){i&&q(0);break}f&&u(o+131072);for(var F=o+R;o<F;o+=4)n[o]=n[o-y],n[o+1]=n[o+1-y],n[o+2]=n[o+2-y],n[o+3]=n[o+3-y];o=F}}e.l=v,e.p=Y,e.b=o,e.f=h,v&&(h=1,e.m=C,e.d=s,e.n=g)}while(!h);return o==n.length?n:ir(n,0,o)},X=function(r,n,e){e<<=n&7;var a=n/8|0;r[a]|=e,r[a+1]|=e>>>8},rr=function(r,n,e){e<<=n&7;var a=n/8|0;r[a]|=e,r[a+1]|=e>>>8,r[a+2]|=e>>>16},gr=function(r,n){for(var e=[],a=0;a<r.length;++a)r[a]&&e.push({s:a,f:r[a]});var f=e.length,i=e.slice();if(!f)return[Mr,0];if(f==1){var u=new w(e[0].s+1);return u[e[0].s]=1,[u,1]}e.sort(function(m,S){return m.f-S.f}),e.push({s:-1,f:25001});var h=e[0],l=e[1],o=0,v=1,s=2;for(e[0]={s:-1,f:h.f+l.f,l:h,r:l};v!=f-1;)h=e[e[o].f<e[s].f?o++:s++],l=e[o!=v&&e[o].f<e[s].f?o++:s++],e[v++]={s:-1,f:h.f+l.f,l:h,r:l};for(var C=i[0].s,a=1;a<f;++a)i[a].s>C&&(C=i[a].s);var g=new b(C+1),z=sr(e[v-1],g,0);if(z>n){var a=0,T=0,M=z-n,V=1<<M;for(i.sort(function(S,x){return g[x.s]-g[S.s]||S.f-x.f});a<f;++a){var U=i[a].s;if(g[U]>n)T+=V-(1<<z-g[U]),g[U]=n;else break}for(T>>>=M;T>0;){var I=i[a].s;g[I]<n?T-=1<<n-g[I]++-1:++a}for(;a>=0&&T;--a){var W=i[a].s;g[W]==n&&(--g[W],++T)}z=n}return[new w(g),z]},sr=function(r,n,e){return r.s==-1?Math.max(sr(r.l,n,e+1),sr(r.r,n,e+1)):n[r.s]=e},Fr=function(r){for(var n=r.length;n&&!r[--n];);for(var e=new b(++n),a=0,f=r[0],i=1,u=function(l){e[a++]=l},h=1;h<=n;++h)if(r[h]==f&&h!=n)++i;else{if(!f&&i>2){for(;i>138;i-=138)u(32754);i>2&&(u(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(u(f),--i;i>6;i-=6)u(8304);i>2&&(u(i-3<<5|8208),i=0)}for(;i--;)u(f);i=1,f=r[h]}return[e.subarray(0,a),n]},er=function(r,n){for(var e=0,a=0;a<n.length;++a)e+=r[a]*n[a];return e},Cr=function(r,n,e){var a=e.length,f=wr(n+2);r[f]=a&255,r[f+1]=a>>>8,r[f+2]=r[f]^255,r[f+3]=r[f+1]^255;for(var i=0;i<a;++i)r[f+i+4]=e[i];return(f+4+a)*8},br=function(r,n,e,a,f,i,u,h,l,o,v){X(n,v++,e),++f[256];for(var s=gr(f,15),C=s[0],g=s[1],z=gr(i,15),T=z[0],M=z[1],V=Fr(C),U=V[0],I=V[1],W=Fr(T),m=W[0],S=W[1],x=new b(19),t=0;t<U.length;++t)x[U[t]&31]++;for(var t=0;t<m.length;++t)x[m[t]&31]++;for(var J=gr(x,7),B=J[0],L=J[1],k=19;k>4&&!B[lr[k-1]];--k);var N=o+5<<3,A=er(f,$)+er(i,d)+u,D=er(f,C)+er(i,T)+u+14+3*k+er(x,B)+(2*x[16]+3*x[17]+7*x[18]);if(N<=A&&N<=D)return Cr(n,v,r.subarray(l,l+o));var y,E,O,Y;if(X(n,v,1+(D<A)),v+=2,D<A){y=H(C,g,0),E=C,O=H(T,M,0),Y=T;var K=H(B,L,0);X(n,v,I-257),X(n,v+5,S-1),X(n,v+10,k-4),v+=14;for(var t=0;t<k;++t)X(n,v+3*t,B[lr[t]]);v+=3*k;for(var R=[U,m],G=0;G<2;++G)for(var Q=R[G],t=0;t<Q.length;++t){var P=Q[t]&31;X(n,v,K[P]),v+=B[P],P>15&&(X(n,v,Q[t]>>>5&127),v+=Q[t]>>>12)}}else y=Or,E=$,O=Yr,Y=d;for(var t=0;t<h;++t)if(a[t]>255){var P=a[t]>>>18&31;rr(n,v,y[P+257]),v+=E[P+257],P>7&&(X(n,v,a[t]>>>23&31),v+=fr[P]);var F=a[t]&31;rr(n,v,O[F]),v+=Y[F],F>3&&(rr(n,v,a[t]>>>5&8191),v+=vr[F])}else rr(n,v,y[a[t]]),v+=E[a[t]];return rr(n,v,y[256]),v+E[256]},Wr=new nr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Mr=new w(0),Gr=function(r,n,e,a,f,i){var u=r.length,h=new w(a+u+5*(1+Math.ceil(u/7e3))+f),l=h.subarray(a,h.length-f),o=0;if(!n||u<8)for(var v=0;v<=u;v+=65535){var s=v+65535;s>=u&&(l[o>>3]=i),o=Cr(l,o+1,r.subarray(v,s))}else{for(var C=Wr[n-1],g=C>>>13,z=C&8191,T=(1<<e)-1,M=new b(32768),V=new b(T+1),U=Math.ceil(e/3),I=2*U,W=function(yr){return(r[yr]^r[yr+1]<<U^r[yr+2]<<I)&T},m=new nr(25e3),S=new b(288),x=new b(32),t=0,J=0,v=0,B=0,L=0,k=0;v<u;++v){var N=W(v),A=v&32767,D=V[N];if(M[A]=D,V[N]=A,L<=v){var y=u-v;if((t>7e3||B>24576)&&y>423){o=br(r,l,0,m,S,x,J,B,k,v-k,o),B=t=J=0,k=v;for(var E=0;E<286;++E)S[E]=0;for(var E=0;E<30;++E)x[E]=0}var O=2,Y=0,K=z,R=A-D&32767;if(y>2&&N==W(v-R))for(var G=Math.min(g,y)-1,Q=Math.min(32767,v),P=Math.min(258,y);R<=Q&&--K&&A!=D;){if(r[v+O]==r[v+O-R]){for(var F=0;F<P&&r[v+F]==r[v+F-R];++F);if(F>O){if(O=F,Y=R,F>G)break;for(var or=Math.min(R,F-2),ar=0,E=0;E<or;++E){var p=v-R+E+32768&32767,pr=M[p],Dr=p-pr+32768&32767;Dr>ar&&(ar=Dr,D=p)}}}A=D,D=M[A],R+=A-D+32768&32767}if(Y){m[B++]=268435456|tr[O]<<18|Ar[Y];var Pr=tr[O]&31,mr=Ar[Y]&31;J+=fr[Pr]+vr[mr],++S[257+Pr],++x[mr],L=v+O,++t}else m[B++]=r[v],++S[r[v]]}}o=br(r,l,i,m,S,x,J,B,k,v-k,o),!i&&o&7&&(o=Cr(l,o+1,Mr))}return ir(h,0,a+wr(o)+f)},Hr=function(){var r=1,n=0;return{p:function(e){for(var a=r,f=n,i=e.length|0,u=0;u!=i;){for(var h=Math.min(u+2655,i);u<h;++u)f+=a+=e[u];a=(a&65535)+15*(a>>16),f=(f&65535)+15*(f>>16)}r=a,n=f},d:function(){return r%=65521,n%=65521,(r&255)<<24|r>>>8<<16|(n&255)<<8|n>>>8}}},Ir=function(r,n,e,a,f){return Gr(r,n.level==null?6:n.level,n.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):12+n.mem,e,a,!f)},Jr=function(r,n,e){for(;e;++n)r[n]=e,e>>>=8},Kr=function(r,n){var e=n.level,a=e==0?0:e<6?1:e==9?3:2;r[0]=120,r[1]=a<<6|(a?32-2*a:1)},Qr=function(r){((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)&&q(6,"invalid zlib data"),r[1]&32&&q(6,"invalid zlib data: preset dictionaries not supported")};function Xr(r,n){n||(n={});var e=Hr();e.p(r);var a=Ir(r,n,2,4);return Kr(a,n),Jr(a,a.length-4,e.d()),a}function Zr(r,n){return Vr((Qr(r),r.subarray(2,-4)),n)}var zr=typeof TextEncoder<"u"&&new TextEncoder,xr=typeof TextDecoder<"u"&&new TextDecoder,$r=0;try{xr.decode(Mr,{stream:!0}),$r=1}catch{}var jr=function(r){for(var n="",e=0;;){var a=r[e++],f=(a>127)+(a>223)+(a>239);if(e+f>r.length)return[n,ir(r,e-1)];f?f==3?(a=((a&15)<<18|(r[e++]&63)<<12|(r[e++]&63)<<6|r[e++]&63)-65536,n+=String.fromCharCode(55296|a>>10,56320|a&1023)):f&1?n+=String.fromCharCode((a&31)<<6|r[e++]&63):n+=String.fromCharCode((a&15)<<12|(r[e++]&63)<<6|r[e++]&63):n+=String.fromCharCode(a)}};function Ur(r,n){if(n){for(var e=new w(r.length),a=0;a<r.length;++a)e[a]=r.charCodeAt(a);return e}if(zr)return zr.encode(r);for(var f=r.length,i=new w(r.length+(r.length>>1)),u=0,h=function(v){i[u++]=v},a=0;a<f;++a){if(u+5>i.length){var l=new w(u+8+(f-a<<1));l.set(i),i=l}var o=r.charCodeAt(a);o<128||n?h(o):o<2048?(h(192|o>>6),h(128|o&63)):o>55295&&o<57344?(o=65536+(o&1023<<10)|r.charCodeAt(++a)&1023,h(240|o>>18),h(128|o>>12&63),h(128|o>>6&63),h(128|o&63)):(h(224|o>>12),h(128|o>>6&63),h(128|o&63))}return ir(i,0,u)}function Br(r,n){if(n){for(var e="",a=0;a<r.length;a+=16384)e+=String.fromCharCode.apply(null,r.subarray(a,a+16384));return e}else{if(xr)return xr.decode(r);var f=jr(r),i=f[0],u=f[1];return u.length&&q(8),i}}const Lr=()=>({encrypt:e=>{const a=Ur(e),f=Xr(a,{level:9}),i=Br(f,!0);return btoa(i)},decrypt:e=>{const a=atob(e);if(a.startsWith("x\xDA")){const f=Ur(a,!0),i=Zr(f);return Br(i)}return a}});j.useCrypter=Lr,Object.defineProperties(j,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
